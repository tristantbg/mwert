@import 'nib'
@import '../../node_modules/jeet/stylus/jeet/*'
@import '_mixins.styl'

// Media queries
$xl = 1439px
$lg = 1260px
$md = 1023px
$sm = 767px

// Colors
$primary ?= #fff
$darkgrey ?= rgba(0,0,0,0.87)
$secondary ?= #000
$accent ?= #ff0000

// Metrics
$padding = 10px

// CSS Reset
global-reset()

webfont('NHUL', 'NHUL', true, 'normal')

body,html
	width 100%
	min-height 100vh
	-webkit-text-size-adjust 100%
	background $primary

html
	font-size 60%
	+below($md)
		font-size 40%

body
	text-rendering optimizeLegibility
	font-smoothing()
	font-family 'NHUL', 'Helvetica', 'Arial', sans-serif
	font-size 1.7rem
	+below($md)
		font-size 2.3rem

p
	margin-bottom 1em
	line-height 130%
	color $darkgrey

p:last-child
	margin-bottom 0

::selection
	background #efefef
	
::-moz-selection
	background #efefef

::-webkit-scrollbar
	width 0px
	background transparent

*
	box-sizing(border-box)

a, a:hover, a:visited, a:focus
	color inherit
	text-decoration none
	cursor pointer

.menu-item, h1, h2
	font-size 2.5rem
	letter-spacing -.03em
	backface()
	+below($md)
		font-size 3rem

img
	display block

img.lazyimg, img.lazyimg + .image-caption
	transition(opacity, 400ms, ease)
	opacity 0

img.lazyimg.lazyloaded, img.lazyimg.lazyloaded + .image-caption
	opacity 1

.diff, .menu-item
	color $primary
	mix-blend-mode difference

@import '_intro.styl'

.loader
	hideselect()
	position fixed
	width 100%
	height 100%
	top 0
	left 0
	background $primary
	background-size 15px
	z-index 11000

header
	hideselect()
	position fixed
	z-index 10000
	top ($padding*3)
	width 100%
	text-align center
	pointer-events none
	+below($md)
		top ($padding*2)
	#site-title, a
		display inline-block
		pointer-events auto
	#site-title
		transition(all, 1s, ease)
		transform-origin 49.5% 47%
		margin-top 0.2rem
	div
		transition(all, 1.5s, ease)
		display inline-block
		height 3.5rem
		overflow hidden
		+below($md)
			display none
		img
			height 100%
			width auto
	img.logo
		height 3.5rem
		display none
		+below($md)
			display inline-block
			width 10rem
	div:first-child
		width 14rem
	div:nth-child(2)
		width 25rem

header.reduction
	div
		width 3.4rem
	div:nth-child(2)
		margin-left -.6rem

header.reduced
	mix-blend-mode difference
	div
		display none
	img.logo
		display inline-block
	#site-title:hover
		+above($md + 1)
			transform(rotate(180deg))

.menu-item
	hideselect()
	position fixed
	z-index 1000
	span.menu-toggle
		cursor pointer
		display block
		max-height 1em
		overflow hidden
	ul.submenu
		margin-left .5em
		li
			transition(height, 1000ms)
			height 0px
			overflow hidden
	ul.submenu.open
		li
			height 1.1em

// #exhibitions-menu
// 	top ($padding*2)
// 	left $padding
// 	+below($md)
// 		top $padding

#projects-menu
	bottom ($padding*2.5)
	left $padding
	backface()
	+below($md)
		top ($padding*2)
		bottom initial
	#exhibitions-menu
		position initial

#about-menu
	top ($padding*2)
	right $padding
	transition(height, 500ms)
	height 1.1em
	overflow hidden

#container
	display inline-block
	width 100%
	margin $padding 0
	padding 0 $padding
	
/// PROJECTS

#projects-container
	hideselect()
	padding-bottom 10vh
	span(1)
	overflow hidden
	+below($md)
		padding 20rem 0 0
	.project
		cf()
		transition(all, 0.7s, cubic-bezier(.60,0,.40,1))
		backface()
		.image-overflow
			transition(opacity, 400ms, ease)
			overflow hidden
			opacity 0
	.project:nth-child(n+2)
		margin-top -15vw
		+below($md)
			margin-top 0 !important
	.project:nth-child(odd)
		padding-right ($padding / 2)
		+below($md)
			padding 0
		.project-title
			bottom "calc(-1.7rem - %s)" % $padding
			right ($padding / 2)
		.secondary.image
			bottom 0
			right ($padding/2)
			text-align right
	.project:nth-child(even)
		margin-left 50%
		padding-left ($padding / 2)
		+below($md)
			margin-left 0
			padding 0
		.project-title
			top "calc(-1.7rem - %s)" % $padding
			left ($padding / 2)
			flex-flow row-reverse
		.secondary.image
			top 0
			left ($padding/2)
	.project.lazyloaded
		.image-overflow
			opacity 1
	.project
		width 50%
		position relative
		float left
		+below($md)
			width 100%
			margin-bottom 6rem
			padding 0
		.project-title
			width 50%
			position absolute
			flexbox()
			justify-content space-between
			color $darkgrey
			font-size 1.7rem
			text-align left
			+below($md)
				width 100%
				position initial
				margin-top $padding
				font-size 2.5rem
				float left
		.featured.image
			transition(transform, 1.3s)
			transition-delay(0s)
			position relative
			z-index 1
		.secondary.image
			position absolute
			width "calc(100% - %s)" % ($padding/2.3)
			z-index 0
			opacity 0
			transition()
			backface()
			transition-delay(400ms)
			+below($md)
				display none
			img.lazyimg.lazyloaded
				opacity 0
		.secondary.image.fit-height
			height 100%
			overflow hidden
			img.lazyimg
				display inline-block
				width auto
				height 100%
		.featured.image.lazyloaded + .secondary.image
			opacity 1
			img.lazyimg.lazyloaded
				opacity 1
	.project.with-secondary:nth-child(odd):hover
		.featured.image
			+above($md + 1)
				transform(translate3d(-200%,0,0) scaleX(2.5))
				transition-delay(400ms)
	.project.with-secondary:nth-child(even):hover
		.featured.image
			+above($md + 1)
				transform(translate3d(200%,0,0) scaleX(2.5))
				transition-delay(400ms)
		
/// PAGE

.inner.page
	span(1)
	text-align center
	#sections
		span(1)
		transition(opacity, 300ms, ease)
		opacity 1

.menu-item.bottom
	bottom ($padding*2.5)
	right $padding
	+below($md)
		bottom $padding

/// SECTIONS

$margin-desktop = 10vw
$margin-mobile = 30vw

.page-content
	width 66.66666666666666%
	//margin-top 15rem
	min-height 100vh
	max-width 1200px
	display inline-block
	text-align left
	float none
	+below($md)
		stack()
		margin-top 20rem
	h1,h2
		margin-bottom 1em
	em
		font-size 1.2rem
		letter-spacing 100%
		top -.5em
		+below($md)
			font-size 2.3rem
	.year
		p
			margin-left 2.8rem
			margin-bottom 0
			+below($md)
				margin-left 5rem
		p:first-child
			margin-left 0
			font-size 1.3rem
			letter-spacing 100%
			border-bottom 1px solid rgba(0,0,0,0.2)
			+below($md)
				font-size 2rem
		p:last-child
			margin-bottom 1em
	section
		span(1)
		margin-bottom $margin-desktop
		+below($md)
			margin-bottom $margin-mobile
		.col-1-4
			width 25%
		.col-2-4
			width 50%
		.col-3-4
			width 75%
		.col-4-4
			width 100%
		.col
			display inline-block
			+above($md + 1)
				padding 0 $padding
			+below($md)
				width 100%
		.content.image
			+above($md + 1)
				padding 0 $padding
		.image-caption
			width 100%
			margin-top $padding
			flexbox()
			justify-content space-between
			font-size 1.2rem
			letter-spacing 100%
			text-align left
			+below($md)
				font-size 2.3rem
	section:first-child
		margin-bottom 7vw
		+below($md)
			margin-bottom $margin-mobile
	section.s-image
		text-align center
	section.s-image.left
		text-align left
		.col
			+above($md + 1)
				padding 0 $padding 0 0
	section.s-image.right
		text-align right
		.col
			+above($md + 1)
				padding 0 0 0 $padding
	section.s-twoimages
		.content.image
			span(1/2)
			+below($md)
				stack()
		.content.image:first-child
			+below($md)
				margin-bottom $margin-mobile
	section.s-text
		.content
			span(1)
	section.s-imagetext.left
		.content:first-child
			span(2/4)
			padding-right 7%
			+below($md)
				stack()
				padding 0
				margin-bottom $margin-mobile
		.content:last-child
			span(2/4)
			+below($md)
				stack()
	section.s-imagetext.right
		.content:first-child
			span(2/4)
			+below($md)
				stack()
				margin-bottom $margin-mobile
		.content:last-child
			span(2/4)
			padding-left 7%
			+below($md)
				stack()
				padding 0
	section#project-description
		.project-title
			col(3/10)
			+below($md)
				stack()
			h1
				line-height 110%
			h1:not(:last-child)
				margin-bottom 0
		.project-text
			col(7/10, cycle:2)
			+below($md)
				stack()

.page-content.about
	width 66.66666666666666%
	min-height 100vh
	max-width 1200px
	margin-top 15rem
	+below($md)
		stack()
	section
		margin-bottom ($margin-desktop/2)
		+below($md)
			margin-bottom ($margin-mobile/2)
	#about-text
		col(3.2/4)
		font-size 2rem
		+below($md)
			stack()
			font-size 3rem
			margin-bottom ($margin-mobile/2)
	#about-contact
		col(0.8/4, gutter: 5, cycle: 2)
		text-transform uppercase
		+above($md + 1)
			text-align right
		+below($md)
			stack()
			flexbox()
		p
			font-size 1.3rem
			letter-spacing 100%
			line-height 1.4
			+below($md)
				font-size 2rem
		p:not(:first-child)
			+below($md)
				margin-left 3em
	section.about-section
		.section-title
			span(2/6)
			+below($md)
				stack()
				font-size 3rem
				margin-bottom 1em
		.section-text
			span(4/6)
			+above($md + 1)
				margin-top .2em
			+below($md)
				stack()

.page-content.page
	width 66.66666666666666%
	min-height 100vh
	max-width 1200px
	margin-top 15rem

footer
	#page-title
		cursor default
	#page-title, #next-project
		transition(all, 500ms)
		height 1.1em
		overflow hidden
	#next-project
		height 0
	#back
		cursor pointer

footer.next-project
	#page-title
		height 0
	#next-project
		height 1.1em

body.about
	#about-menu
		height 0

body.leaving
	#projects-container
		.project:hover
			.secondary.image + .featured.image
				transform(translate3d(0,0,0))
		.project:nth-child(odd)
			transform(translate3d(-110%,0,0))
		.project:nth-child(even)
			transform(translate3d(110%,0,0))
	.inner.page
		#sections, .section
			opacity 0
		footer
			#page-title, #next-project
				height 0


